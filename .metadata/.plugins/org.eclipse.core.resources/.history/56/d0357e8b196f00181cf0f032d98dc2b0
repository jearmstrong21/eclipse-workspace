package co.megadodo.shaderfun;

import java.nio.ByteBuffer;
import java.nio.IntBuffer;

import javax.media.opengl.GL3;

public class Shader {

	private static int makeShader(GL3 gl, int type, String typeStr, String source) {
		int shaderID = gl.glCreateShader(type);
		
		return shaderID;
	}

	public int programID;
	public String vertCode;
	public String fragCode;
	public String vertFileName;
	public String fragFileName;

	public Shader() {

	}

	public void loadFiles() {
		vertCode = FileUtils.loadFile(vertFileName);
		fragCode = FileUtils.loadFile(fragFileName);
	}

	public void genProgram(GL3 gl) {
		int vert = makeShader(gl, GL3.GL_VERTEX_SHADER, "VERTEX", vertCode);
		int frag = makeShader(gl, GL3.GL_FRAGMENT_SHADER, "FRAGMENT", fragCode);
		programID = gl.glCreateProgram();
		gl.glAttachShader(programID, vert);
		gl.glAttachShader(programID, frag);
		gl.glLinkProgram(programID);
		gl.glDeleteShader(vert);
		gl.glDeleteShader(frag);
	}

	public void useProgram(GL3 gl) {
		gl.glUseProgram(programID);
	}

	public void deleteProgram(GL3 gl) {
		gl.glDeleteProgram(programID);
	}

}
